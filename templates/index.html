<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Restaurant Map & Analytics</title>

    <!-- Plotly -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>

<header>Restaurant Map & Analytics</header>

<!-- MAP SECTION -->
<div id="map-container">
    <div id="map"></div>

    <div id="floating-filter">
        <div class="filter-title">Filters</div>

        <label for="city">City</label>
        <select id="city" name="city">
            <option value="All">All</option>
            {% for c in cities %}
                <option value="{{ c }}">{{ c }}</option>
            {% endfor %}
        </select>

        <label for="cuisine">Cuisine</label>
        <select id="cuisine" name="cuisine">
            <option value="All">All</option>
            {% for cu in cuisines %}
                <option value="{{ cu }}">{{ cu }}</option>
            {% endfor %}
        </select>

        <div class="filter-actions">
            <button id="filterBtn">Apply</button>
            <button id="resetBtn">Reset</button>
        </div>
    </div>
</div>


<!-- ========================= -->
<!--       INDIA CHARTS        -->
<!-- ========================= -->
<h2 class="section-title" style="text-align:center; margin-top:40px;">ğŸ‡®ğŸ‡³ India â€” City Insights</h2>

<div class="charts-wrapper">

    <div class="chart-card">
        <h3>India â€” Number of Restaurants</h3>
        <div id="india_restaurants" class="chart-box"></div>
    </div>

    <div class="chart-card">
        <h3>India â€” Average Rating</h3>
        <div id="india_ratings" class="chart-box"></div>
    </div>

    <div class="chart-card wide">
        <h3>India â€” Cuisine Variety</h3>
        <div id="india_cuisines" class="chart-box"></div>
    </div>

</div>


<!-- ========================= -->
<!--    INTERNATIONAL CHARTS   -->
<!-- ========================= -->
<h2 class="section-title" style="text-align:center; margin-top:40px;">ğŸŒ Global â€” City Insights</h2>

<div class="charts-wrapper">

    <div class="chart-card">
        <h3>Global â€” Number of Restaurants</h3>
        <div id="global_restaurants" class="chart-box"></div>
    </div>

    <div class="chart-card">
        <h3>Global â€” Average Rating</h3>
        <div id="global_ratings" class="chart-box"></div>
    </div>

    <div class="chart-card wide">
        <h3>Global â€” Cuisine Variety</h3>
        <div id="global_cuisines" class="chart-box"></div>
    </div>

</div>



<!-- ========================= -->
<!--      PLOTLY SCRIPTS       -->
<!-- ========================= -->
<script>
(function () {

    const cfg = {
        responsive: true,
        displaylogo: false,
        modeBarButtonsToRemove: [
            "lasso2d",
            "select2d",
            "sendDataToCloud",
            "zoomIn2d",
            "zoomOut2d"
        ]
    };

    const charts = {{ charts | tojson }};

    // INDIA
    Plotly.newPlot("india_restaurants", charts.india_restaurants.data, charts.india_restaurants.layout, cfg);
    Plotly.newPlot("india_ratings", charts.india_ratings.data, charts.india_ratings.layout, cfg);
    Plotly.newPlot("india_cuisines", charts.india_cuisines.data, charts.india_cuisines.layout, cfg);

    // GLOBAL
    Plotly.newPlot("global_restaurants", charts.global_restaurants.data, charts.global_restaurants.layout, cfg);
    Plotly.newPlot("global_ratings", charts.global_ratings.data, charts.global_ratings.layout, cfg);
    Plotly.newPlot("global_cuisines", charts.global_cuisines.data, charts.global_cuisines.layout, cfg);

})();
</script>


<!-- LEAFLET JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>

<!-- CUSTOM JS -->
<script src="{{ url_for('static', filename='script.js') }}"></script>

</body>
</html>
